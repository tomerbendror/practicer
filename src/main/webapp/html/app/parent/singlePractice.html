<div>
    <div class="practice-page-loader">
        <i class="fa fa-spin fa-spin-1x fa-4x fa-asterisk fa-fw text-primary"></i>
    </div>

    <div id="single-practice-container" class="panel-body practice-panel-body {{::practice.questionsType}} {{practiceViewMode ? 'view-mode' : ''}}" ng-class="practiceContainerClass" style="padding: 10px 0 0 0;background: white;">
        <div class="panel panel-default practice-panel no-bottom-margin border-radius-0 practice-panel editable-panel {{practiceViewMode ? 'view-mode' : ''}}">
            <div class="panel-heading" id="practice-page-heading" style="position: fixed;z-index: 10;">
                <div class="pull-left" style="margin: 9px 5px 5px 6px;">
                    <div class="btn-group btn-group-xs">
                        <button more-btn type="button" class="btn btn-default dropdown-toggle no-text-at-narrow" data-toggle="dropdown">
                        </button>
                        <ul class="dropdown-menu">
                            <li data-ng-show="userHasEditPermissions && practiceViewMode"><a data-ng-click="editPractice()">
                                <i class="fa fa-pencil"></i> עריכה</a>
                            </li>
                            <li data-ng-show="practice.id > 0"><a data-ng-click="duplicatePractice()"><i class="fa fa-puzzle-piece"></i> שכפול תרגיל</a></li>
                            <li data-ng-show="practice.id > 0"><a data-ng-click="copyQuestionsToExistPractice()">
                                <i class="fa fa-copy"></i> העתקת השאלות לתרגיל קיים</a>
                            </li>
                            <li data-ng-show="practice.id < 1"><a data-ng-click="cancelPracticeEdit()">
                                <i class="fa fa-times"></i> ביטול</a>
                            </li>
                            <li ng-show="userHasEditPermissions && practice.id > 0"><a data-ng-click="deletePractice()"><i class="fa fa-trash-o"></i> מחק תרגיל</a></li>
                        </ul>
                    </div>
                </div>

                <ul class="panel-actions" style="padding-top: 6px;padding-left: 7px">
                    <li id="create-new-question-btn">
                        <button data-ng-show="userHasEditPermissions && !practiceViewMode" data-ng-click="createQuestion()" type="button" class="btn btn-greentur btn-sm">
                            <i class="fa fa-pencil"></i> שאלה חדשה
                        </button>
                    </li>
                </ul>

                <div style="display: inline-flex">
                    <div><img class="practice-profile-panel-img" ng-src="/wrapkit/images/dummy/{{::practice.questionsType}}.PNG" alt="profile"></div>
                    <div>
                        <h3 class="panel-title">
                            <strong>{{practice.name}}</strong><br>
                            <small>{{::practiceDescription}} (<span data-ng-show="lazyLoad">מציג {{practice.questions.length}} מתוך </span>{{allQuestions.length}} שאלות)
                            <span ng-click="loadAllQuestions()" data-ng-show="lazyLoad" style="font-weight: bold;cursor: hand;text-decoration: underline;color: #2980b9">טען הכל</span></small>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
        <tabset style="padding-top: 56px" id="practice-tabset">
            <tab id="practice-general-tab" active="tabs['GENERAL_TAB'].active" ng-click="validateScreenCalculation(50)" heading="כללי" >
                <div class="panel-body panel-body-narrow practice-general-tab">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label" >שם התרגיל</label>
                            <div class="col-sm-7">
                                <input type="text" data-ng-disabled="practiceViewMode" class="form-control" data-ng-model="practice.name">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label" >תאור התרגיל</label>
                            <div class="col-sm-7">
                                <input type="text" data-ng-disabled="practiceViewMode" class="form-control" data-ng-model="practice.description">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">מספר השאלות בכל תרגיל</label>
                            <div class="col-sm-7">
                                <input type="number" min="5" max="99" data-ng-disabled="practiceViewMode" class="form-control" data-ng-model="practice.questionsPerPractice">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label" >מספר טעויות אפשרי לשאלה</label>
                            <div class="col-sm-7">
                                <label class="select select-o">
                                    <select data-ng-disabled="practiceViewMode" data-ng-model="practice.maxMistakesNum">
                                        <option value="0">ללא הגבלה</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </label>
                            </div>
                        </div>

                        <div class="form-group" data-ng-if="practice.questionsType == 'TRANSLATION'">
                            <label class="col-xs-4 col-sm-3 control-label" data-ng-if="!isSingleAnswer()" class="col-sm-3 control-label" >אפשר הקראת המילה
                                <a tooltip="מאפשר למתרגל לשמוע את המילה או המשפט כחלק מהתרגול"><i class="fa fa-question-circle"></i></a>
                            </label>
                            <div class="col-xs-1">
                                <switch name="useTTS" data-ng-model="practice.useTTS" disabled="practiceViewMode"></switch>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-4 col-sm-3 control-label" >הצגת השאלות בסדר אקראי</label>
                            <div class="col-xs-1">
                                <switch name="useRandomOrder" data-ng-model="practice.randomOrder" disabled="practiceViewMode"></switch>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
            <tab id="practice-questions-tab" active="tabs['QUESTIONS_TAB'].active" ng-click="validateScreenCalculation(50)" heading="שאלות">
                <div class="sortable-container" sv-root sv-part="$parent.practice.questions" style="padding-bottom: 0">
                    <div infinite-scroll='nextPage()' infinite-scroll-disabled='busy' infinite-scroll-distance='0'>
                        <div id="question-container-{{question.id}}" x-single-question-panel ng-repeat="question in $parent.practice.questions" question="question" sv-element>
                            <div style='clear: both;'></div>
                        </div>
                        <div ng-show='busy'></div>
                    </div>
                </div>
            </tab>
            <tab id="practice-share-tab" active="tabs['SHARE_TAB'].active" ng-click="validateScreenCalculation(50)" heading="שיתוף">
                <div class="child-details-table table-responsive">
                    <div class="practice-share-media-container">
                        <div data-ng-repeat="potentialShareChild in practice.practiceSharedChildData">
                            <div class="media" ng-click="onShareMediaClicked(potentialShareChild)">
                                <div style="padding-right: 10px;">
                                    <a class="pull-right kit-avatar kit-avatar-36" style="margin-left: 5px;">
                                        <core-icon class="child-avatar share-avatar" aria-label="avatar-2" role="img">
                                            <svg data-ng-if="potentialShareChild.gender != 'FEMALE'" viewBox="0 0 128 128" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path fill="#B9F6CA" d="M0 0h128v128h-128z"></path><path fill="#FFCC80" d="M70.1 122.5l.6-.1c6.1-.8 12-2.4 17.7-4.8 1.2-.5 2.4-1.1 3.2-2.1 1.3-1.7-.1-5.6-.5-7.7-.7-3.8-1.3-7.7-1.9-11.5-.7-4.5-1.5-9.1-1.6-13.7-.2-7.6.7-12.3 1.9-15.3h9l-2.6-10.4c-.2-2.4-.4-4.8-.7-6.8-.2-1.9-.6-3.6-1.2-5.3-14.9 2.2-24.5.9-30.7-1.8l-23.1 4.5-.7.1h-.7c-.4-.1-.9-.2-1.2-.4-.4 0-.9 0-1.4.1-4.1.6-6.9 4.7-6.3 9.1.3 2 1.2 3.8 2.6 5 .3.1 1.6.7 3.4 1.7.8.4 1.6 1 2.5 1.6 1.5 1.1 3.2 2.5 4.9 4.1 5.8 5.9 8.4 13.8 7.4 22-.6 4.7-2.2 9.4-4.4 13.6-.5 1-1 1.6-1.1 2.8-.1 1.1-.1 2.3.1 3.4.4 2.3 1.5 4.4 3 6.2 2.6 3.1 6.4 5 10.4 5.8 3.8.4 7.6.3 11.4-.1zm9.5-67.6c.9 0 1.6.7 1.6 1.6 0 .9-.7 1.6-1.6 1.6s-1.6-.7-1.6-1.6c-.1-.8.7-1.6 1.6-1.6zM128 97.7c-3.3 1.9-6.6 3.7-9.9 5.3-3.2 1.5-6.3 2.9-9.6 4.2-.9.4-2.1.5-2.9 1.1-1.1.8-1.9 2.5-2.3 3.7-.6 1.6-.6 3.4.3 4.8.8 1.2 2.1 2 3.5 2.6 5.9 2.9 12.2 5.1 18.6 6.5 1.4.3 2.3 1.8 2.4.1v-28.1c-.1.1-.1-.1-.1-.2z"></path><path d="M38.9 47.4zM39.6 47.4z" fill="none"></path><path fill="#444" d="M94.2 44.9c-.8-2.6-1.8-5-3.2-7.2l-7.2 1.4-20.4 4c6.3 2.7 15.9 4 30.8 1.8z"></path><path fill="#E65100" d="M38.9 48.4h.7c.2 0 .5 0 .7-.1l23.1-4.5 20.4-4 23.3-4.5c1.9-.4 3.2-2 2.9-3.6-.3-1.6-2.1-2.6-4.1-2.3l-19.6 3.8-1.3-6.8c-2-10.9-15-17.7-29.1-14.9-14 2.7-23.7 13.9-21.6 24.9h.1l1.7 9v.7c.2.8.7 1.4 1.4 1.9.5.1 1 .3 1.4.4z"></path><circle fill="#444" cx="79.6" cy="56.5" r="2"></circle><path fill="#689F38" d="M128 128v-1.8l-21.7-18.2-.4.2-2.9 1.3c-3 1.3-6 2.6-9.2 3.8l-1.4.5c-9 3.3-16.5 4.1-22.8 3.6-16.4-1.3-23.8-11.9-23.8-11.9-2.2 4.2-5.2 8.7-9.2 13.5l-.3.4-1.7 2c-.9 1.1-2 2.6-3.4 4.5-.4.6-.9 1.3-1.4 2l98.2.1z"></path><path fill="#FFCC80" d="M36.3 119.3s.1-.2.2-.3c-.1.1-.2.2-.2.3z"></path></g></svg>
                                            <svg data-ng-if="potentialShareChild.gender == 'FEMALE'"viewBox="0 0 128 128" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path fill="#448AFF" d="M0 0h128v128h-128z"></path><g fill="#00BFA5"><path d="M73 18.7c-4.8 0-9.7.8-14 2.3-.1.1-.2.2-.4.3l-7.3 4.6c-.6.4-1.4.4-2 .1-.3-.2-.6-.4-.8-.7l-.7-1.1c-.6-1-.3-2.2.6-2.8l7.3-4.6c.4-.2.8-.3 1.2-.3-5.5-3-23.7-10.7-33.7 10.7-11.8 25.4 11 50.2-14.4 62.6 0 0 26.2 13.7 40.9-24.8 3.7 3.2 8.8 5.8 16 7.4-.6-5.6.8-9.8-2.1-12.8-1.3-1.4-2.7-1.5-4-2.4-.7-.5-1.4-.9-2-1.3-1.5-.9-2.6-1.3-2.8-1.4-1.1-1-1.9-2.4-2.1-4.1-.5-3.6-2.2-6.9 1.1-7.4.8-.1 1.6-.1 2.4.2 8-1.5 11.6-6.7 12.8-8.9 3.4 4.8 11.7 9.8 31.9 6.8.3 1.1.6 1.2.8 2.4l.5-1.3c-.1-13-13.2-23.5-29.2-23.5zM56.1 43.2zM61.4 89.7s6 8.6 19.4 9.7c5.1.4 11.3-.3 18.6-2.9-.1-.6-.3-1.2-.4-1.7-.2-1.1-3.2-18-3.4-23.6-.2-6.2.6-10 1.6-12.4h7.3l-2.1-8.5c-.1-2-.4-3.9-.6-5.6 0-.3-.1-.7-.2-1-.2-1.1-.4-2.3-.8-3.4-20.2 3-28.5-2-31.9-6.8-1.2 2.1-4.8 7.4-12.8 8.9-.8-.2-1.6-.3-2.4-.2-3.3.5-5.6 3.8-5.1 7.4.2 1.7 1 3.1 2.1 4.1.2.1 1.3.5 2.8 1.4.6.4 1.3.8 2 1.3 1.3.9 2.6 2 4 3.4 2.9 3 5.6 7.2 6.1 12.8.5 4.5-.6 10.2-4.2 17.1zm27.5-41.2c.7 0 1.3.6 1.3 1.3s-.6 1.3-1.3 1.3-1.3-.6-1.3-1.3.6-1.3 1.3-1.3zM56.1 43.2c.1-.1 0-.1 0 0zM53.7 100.9l.2-.2-.2.2z"></path><circle cx="88.9" cy="49.8" r="2"></circle><path d="M80.8 99.3c-13.3-1.1-19.4-9.7-19.4-9.7-1.8 3.4-4.3 7.1-7.5 11l-.3.3c-.4.5-.9 1.1-1.4 1.7-.7.9-1.6 2.1-2.8 3.7-2.3 3.2-5.4 7.8-8.8 13.5-1.4 2.4-2.9 5.1-4.4 8 0 0 0 .1-.1.1h71.3c-.6-1.6-1.3-3.2-1.7-4.8-2.2-8.6-4.6-17.9-6.5-26.8-7.2 2.8-13.3 3.5-18.4 3zM55.7 16.7l-7.3 4.6c-1 .6-1.3 1.9-.6 2.8l.7 1.1c.2.3.5.6.8.7.6.3 1.4.3 2-.1l7.3-4.6.4-.3c.7-.7.8-1.7.3-2.5l-.7-1.1c-.4-.6-1-.9-1.6-1-.5 0-1 .1-1.3.4z"></path></g><path fill="#444" d="M73 18.7c-4.8 0-9.7.8-14 2.3-.1.1-.2.2-.4.3l-7.3 4.6c-.6.4-1.4.4-2 .1-.3-.2-.6-.4-.8-.7l-.7-1.1c-.6-1-.3-2.2.6-2.8l7.3-4.6c.4-.2.8-.3 1.2-.3-5.5-3-23.7-10.7-33.7 10.7-11.8 25.4 11 50.2-14.4 62.6 0 0 26.2 13.7 40.9-24.8 3.7 3.2 8.8 5.8 16 7.4-.6-5.6.8-9.8-2.1-12.8-1.3-1.4-2.7-1.5-4-2.4-.7-.5-1.4-.9-2-1.3-1.5-.9-2.6-1.3-2.8-1.4-1.1-1-1.9-2.4-2.1-4.1-.5-3.6-2.2-6.9 1.1-7.4.8-.1 1.6-.1 2.4.2 8-1.5 11.6-6.7 12.8-8.9 3.4 4.8 11.7 9.8 31.9 6.8.3 1.1.6 1.2.8 2.4l.5-1.3c-.1-13-13.2-23.5-29.2-23.5zM56.1 43.2z"></path><path fill="#FFE0B2" d="M61.4 89.7s6 8.6 19.4 9.7c5.1.4 11.3-.3 18.6-2.9-.1-.6-.3-1.2-.4-1.7-.2-1.1-3.2-18-3.4-23.6-.2-6.2.6-10 1.6-12.4h7.3l-2.1-8.5c-.1-2-.4-3.9-.6-5.6 0-.3-.1-.7-.2-1-.2-1.1-.4-2.3-.8-3.4-20.2 3-28.5-2-31.9-6.8-1.2 2.1-4.8 7.4-12.8 8.9-.8-.2-1.6-.3-2.4-.2-3.3.5-5.6 3.8-5.1 7.4.2 1.7 1 3.1 2.1 4.1.2.1 1.3.5 2.8 1.4.6.4 1.3.8 2 1.3 1.3.9 2.6 2 4 3.4 2.9 3 5.6 7.2 6.1 12.8.5 4.5-.6 10.2-4.2 17.1zm27.5-41.2c.7 0 1.3.6 1.3 1.3s-.6 1.3-1.3 1.3-1.3-.6-1.3-1.3.6-1.3 1.3-1.3zM56.1 43.2c.1-.1 0-.1 0 0z"></path><path fill="#FFCC80" d="M53.7 100.9l.2-.2-.2.2z"></path><circle fill="#444" cx="88.9" cy="49.8" r="2"></circle><path fill="#FF5722" d="M80.8 99.3c-13.3-1.1-19.4-9.7-19.4-9.7-1.8 3.4-4.3 7.1-7.5 11l-.3.3c-.4.5-.9 1.1-1.4 1.7-.7.9-1.6 2.1-2.8 3.7-2.3 3.2-5.4 7.8-8.8 13.5-1.4 2.4-2.9 5.1-4.4 8 0 0 0 .1-.1.1h71.3c-.6-1.6-1.3-3.2-1.7-4.8-2.2-8.6-4.6-17.9-6.5-26.8-7.2 2.8-13.3 3.5-18.4 3z"></path><path fill="#00BFA5" d="M55.7 16.7l-7.3 4.6c-1 .6-1.3 1.9-.6 2.8l.7 1.1c.2.3.5.6.8.7.6.3 1.4.3 2-.1l7.3-4.6.4-.3c.7-.7.8-1.7.3-2.5l-.7-1.1c-.4-.6-1-.9-1.6-1-.5 0-1 .1-1.3.4z"></path></g></svg>
                                        </core-icon>
                                    </a>
                                </div>
                                <div class="media-body" style="height: 40px">
                                    <div style="float: right;margin-top: 4px"><span style="font-size: 20px" class="media-heading">{{potentialShareChild.childName}}</span></div>
                                    <div class="pull-left">
                                        <switch data-ng-model="potentialShareChild.isShare"  ng-change="$event.stopPropagation()" disabled="practiceViewMode"></switch>
                                    </div>
                                </div><!-- /.media-body -->
                                <hr>
                            </div>
                        </div>

                        <div data-ng-repeat="potentialShareGroup in practice.practiceSharedGroupData">
                            <div class="media" ng-click="onShareMediaClicked(potentialShareGroup)" style="padding-right: 3px;">
                                <div style="padding-right: 10px;">
                                    <a class="pull-right kit-avatar kit-avatar-36" style="margin-left: 5px;">
                                        <img class="media-object" src="/wrapkit/images/dummy/group-icon.PNG" alt="">
                                    </a>
                                </div>
                                <div class="media-body" style="height: 40px">
                                    <div style="float: right;margin-top: 4px"><span style="font-size: 20px" class="media-heading">{{potentialShareGroup.groupName}}</span></div>
                                    <div class="pull-left">
                                        <switch data-ng-model="potentialShareGroup.isShare" ng-change="$event.stopPropagation()" disabled="practiceViewMode"></switch>
                                    </div>
                                </div><!-- /.media-body -->
                                <hr>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
        </tabset>

        <div id="single-practice-controls-panel">
            <div class="pull-left">
                <button data-ng-disabled="isWaitingForServer" data-ng-click="cancelPracticeEdit()" class="btn btn-default">ביטול</button>
                <busy-button id="create-practice-btn-id" data-ng-click="createOrUpdatePractice()" class="btn btn-primary" show-loading="{{isWaitingForServer}}" caption="{{saveBtnCaption}}" busy-caption="שומר"></busy-button>
            </div>
        </div>
    </div>
</div>